<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ§© Game Xáº¿p HÃ¬nh - Sliding Puzzle</title>
    
    <!-- ==================== CSS BÃŠN NGOÃ€I ==================== -->
    <!-- Tailwind CSS tá»« CDN (thÆ° viá»‡n CSS giÃºp style nhanh) -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Font - Font chá»¯ Ä‘áº¹p -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- File CSS cá»§a chÃºng ta (styles.css) -->
    <link rel="stylesheet" href="puzzles.css">
</head>

<body class="bg-gray-100 min-h-screen py-8">
    
    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘                                                                          â•‘
         â•‘   PHáº¦N HTML: Cáº¤U TRÃšC GIAO DIá»†N                                         â•‘
         â•‘                                                                          â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    
    <!-- ==================== CONTAINER CHÃNH ==================== 
         Giáº£i thÃ­ch:
         - max-w-4xl: chiá»u rá»™ng tá»‘i Ä‘a (khÃ´ng quÃ¡ lá»›n)
         - mx-auto: cÄƒn giá»¯a theo chiá»u ngang
         - px-4: padding (khoáº£ng cÃ¡ch) 2 bÃªn
    -->
    <div class="max-w-4xl mx-auto px-4">
        
        <!-- ==================== NÃšT Báº®T Äáº¦U/Káº¾T THÃšC ==================== -->
        <div class="text-center mb-6">
            <button 
                id="startBtn"
                onclick="toggleGame()"
                class="px-8 py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-full 
                       text-lg shadow-lg transform hover:scale-105 transition-all duration-200"
            >
                Báº¯t Ä‘áº§u
            </button>
        </div>
        
        <!-- ==================== KHU Vá»°C GAME CHÃNH ==================== 
             Giáº£i thÃ­ch:
             - flex: xáº¿p cÃ¡c pháº§n tá»­ theo hÃ ng/cá»™t
             - flex-col lg:flex-row: xáº¿p dá»c trÃªn mobile, ngang trÃªn desktop
             - gap-6: khoáº£ng cÃ¡ch giá»¯a cÃ¡c pháº§n tá»­
        -->
        <div class="flex flex-col lg:flex-row gap-6 justify-center items-start">
            
            <!-- ========== GAME BOARD (Báº£ng chÆ¡i) ========== 
                 Giáº£i thÃ­ch:
                 - grid grid-cols-4: chia thÃ nh lÆ°á»›i 4 cá»™t
                 - gap-2: khoáº£ng cÃ¡ch giá»¯a cÃ¡c Ã´
                 - 400x300px: kÃ­ch thÆ°á»›c cá»‘ Ä‘á»‹nh
            -->
            <div class="bg-white rounded-2xl shadow-xl p-6">
                <div 
                    id="gameBoard"
                    class="grid grid-cols-4 gap-2"
                    style="width: 400px; height: 300px;"
                >
                    <!-- CÃ¡c Ã´ sáº½ Ä‘Æ°á»£c JavaScript táº¡o ra -->
                </div>
            </div>
            
            <!-- ========== PANEL BÃŠN PHáº¢I ========== -->
            <div class="flex flex-col gap-4">
                
                <!-- Äá»“ng há»“ Ä‘áº¿m giá» -->
                <div class="bg-white rounded-xl shadow-lg p-4 text-center">
                    <h3 class="text-gray-600 font-semibold mb-2">Äá»“ng Há»“</h3>
                    <div 
                        id="timer"
                        class="text-4xl font-bold text-gray-800"
                    >
                        00:00
                    </div>
                </div>
                
                <!-- HÆ°á»›ng dáº«n di chuyá»ƒn -->
                <div class="bg-white rounded-xl shadow-lg p-4">
                    <h3 class="text-gray-600 font-semibold mb-3 text-center">HÆ°á»›ng Dáº«n Di Chuyá»ƒn</h3>
                    
                    <!-- PhÃ­m mÅ©i tÃªn -->
                    <div class="flex flex-col items-center gap-1 mb-3">
                        <div id="keyUp" class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 font-bold">â†‘</div>
                        <div class="flex gap-1">
                            <div id="keyLeft" class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 font-bold">â†</div>
                            <div id="keyDown" class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 font-bold">â†“</div>
                            <div id="keyRight" class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 font-bold">â†’</div>
                        </div>
                    </div>
                    
                    <!-- PhÃ­m WASD -->
                    <div class="flex flex-col items-center gap-1">
                        <div id="keyW" class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 font-bold">W</div>
                        <div class="flex gap-1">
                            <div id="keyA" class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 font-bold">A</div>
                            <div id="keyS" class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 font-bold">S</div>
                            <div id="keyD" class="w-10 h-10 bg-gray-200 rounded flex items-center justify-center text-gray-500 font-bold">D</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ==================== Báº¢NG Lá»ŠCH Sá»¬ LÆ¯á»¢T CHÆ I ==================== -->
        <div class="mt-8 bg-white rounded-xl shadow-lg p-6">
            <h3 class="text-gray-700 font-bold text-lg mb-4 text-center">Lá»‹ch Sá»­ LÆ°á»£t ChÆ¡i</h3>
            <table class="w-full">
                <thead>
                    <tr class="border-b-2 border-gray-200">
                        <th class="py-2 text-gray-600">#</th>
                        <th class="py-2 text-gray-600">BÆ°á»›c Ä‘i</th>
                        <th class="py-2 text-gray-600">Thá»i Gian</th>
                    </tr>
                </thead>
                <tbody id="historyBody">
                    <!-- Lá»‹ch sá»­ sáº½ Ä‘Æ°á»£c thÃªm vÃ o Ä‘Ã¢y bá»Ÿi JavaScript -->
                </tbody>
            </table>
            
            <!-- ThÃ´ng bÃ¡o khi chÆ°a cÃ³ lá»‹ch sá»­ -->
            <p id="noHistory" class="text-center text-gray-400 py-4">
                ChÆ°a cÃ³ lÆ°á»£t chÆ¡i nÃ o. HÃ£y báº¯t Ä‘áº§u chÆ¡i!
            </p>
        </div>
        
        <!-- ==================== THÃ”NG BÃO THáº®NG (áº¨n máº·c Ä‘á»‹nh) ==================== 
             Giáº£i thÃ­ch:
             - fixed inset-0: phá»§ toÃ n mÃ n hÃ¬nh
             - bg-black bg-opacity-50: ná»n Ä‘en má» 50%
             - hidden: áº©n Ä‘i, chá»‰ hiá»‡n khi tháº¯ng
             - z-50: náº±m trÃªn cÃ¹ng
        -->
        <div 
            id="winModal"
            class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50"
        >
            <div class="bg-white rounded-2xl p-8 text-center shadow-2xl">
                <h2 class="text-4xl font-bold text-green-500 mb-4">ğŸ‰ YOU WIN! ğŸ‰</h2>
                <p id="winMessage" class="text-gray-600 text-lg mb-6"></p>
                <button 
                    onclick="playAgain()"
                    class="px-8 py-3 bg-green-500 hover:bg-green-600 text-white font-bold rounded-full
                           text-lg shadow-lg transform hover:scale-105 transition-all duration-200"
                >
                    ChÆ¡i láº¡i
                </button>
            </div>
        </div>
    </div>

    <!-- â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
         â•‘                                                                          â•‘
         â•‘   PHáº¦N JAVASCRIPT: LOGIC Cá»¦A GAME                                       â•‘
         â•‘                                                                          â•‘
         â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <script>
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 1: KHAI BÃO BIáº¾N (Chuáº©n bá»‹ Ä‘á»“ chÆ¡i trÆ°á»›c khi chÆ¡i)              â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * ğŸ® BOARD (Báº£ng chÆ¡i)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - LÃ  má»™t Máº¢NG (danh sÃ¡ch) chá»©a 12 pháº§n tá»­
         * - 11 sá»‘ (tá»« 1 Ä‘áº¿n 11) + 1 Ã´ trá»‘ng (null)
         * - null = "khÃ´ng cÃ³ gÃ¬" = Ã´ Ä‘en
         * 
         * HÃ¬nh dung nhÆ° lÆ°á»›i 4 cá»™t x 3 hÃ ng:
         * 
         *   Vá»‹ trÃ­:  0   1   2   3
         *          [1] [2] [3] [4]    <- hÃ ng 0
         *   
         *   Vá»‹ trÃ­:  4   5   6   7
         *          [5] [6] [7] [8]    <- hÃ ng 1
         *   
         *   Vá»‹ trÃ­:  8   9   10  11
         *          [9] [10][11][â¬›]   <- hÃ ng 2 (Ã´ Ä‘en á»Ÿ vá»‹ trÃ­ 11)
         */
        let board = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, null];
        
        /**
         * ğŸ¯ BLACK INDEX (Vá»‹ trÃ­ Ã´ Ä‘en)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Ghi nhá»› Ã´ Ä‘en Ä‘ang á»Ÿ Ä‘Ã¢u trong máº£ng
         * - Ban Ä‘áº§u Ã´ Ä‘en á»Ÿ vá»‹ trÃ­ sá»‘ 11 (gÃ³c dÆ°á»›i bÃªn pháº£i)
         * - Má»—i khi Ã´ Ä‘en di chuyá»ƒn, sá»‘ nÃ y sáº½ thay Ä‘á»•i
         */
        let blackIndex = 11;
        
        /**
         * ğŸ® IS PLAYING (Äang chÆ¡i hay khÃ´ng?)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - true = ÄÃšNG = Ä‘ang chÆ¡i (Ä‘á»“ng há»“ cháº¡y, cÃ³ thá»ƒ báº¥m phÃ­m)
         * - false = SAI = chÆ°a chÆ¡i hoáº·c Ä‘Ã£ dá»«ng
         * - Giá»‘ng nhÆ° cÃ´ng táº¯c: Báº¬T hoáº·c Táº®T
         */
        let isPlaying = false;
        
        /**
         * â±ï¸ TIMER ID (Sá»‘ ID cá»§a Ä‘á»“ng há»“)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Khi báº­t Ä‘á»“ng há»“, mÃ¡y tÃ­nh cho ta má»™t "sá»‘ tháº»"
         * - Giá»¯ sá»‘ tháº» nÃ y Ä‘á»ƒ sau cÃ³ thá»ƒ dá»«ng Ä‘á»“ng há»“
         * - Giá»‘ng nhÆ° sá»‘ tháº» gá»­i xe: cáº§n nÃ³ Ä‘á»ƒ láº¥y xe ra
         */
        let timerId = null;
        
        /**
         * â±ï¸ SECONDS (Sá»‘ giÃ¢y Ä‘Ã£ chÆ¡i)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Äáº¿m tá»« 0, má»—i giÃ¢y tÄƒng lÃªn 1
         * - VÃ­ dá»¥: 0, 1, 2, 3, ... 60, 61, 62, ...
         */
        let seconds = 0;
        
        /**
         * ğŸ‘£ MOVE COUNT (Sá»‘ bÆ°á»›c Ä‘Ã£ Ä‘i)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Äáº¿m sá»‘ láº§n ngÆ°á»i chÆ¡i di chuyá»ƒn Ã´ Ä‘en
         * - Má»—i láº§n báº¥m phÃ­m thÃ nh cÃ´ng = +1 bÆ°á»›c
         */
        let moveCount = 0;
        
        /**
         * ğŸ“œ HISTORY (Lá»‹ch sá»­ cÃ¡c lÆ°á»£t chÆ¡i)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Máº£ng (danh sÃ¡ch) chá»©a káº¿t quáº£ cÃ¡c lÆ°á»£t tháº¯ng
         * - Má»—i lÆ°á»£t gá»“m: sá»‘ thá»© tá»±, sá»‘ bÆ°á»›c, thá»i gian
         * - VÃ­ dá»¥: [{ round: 1, moves: 50, time: "01:23" }]
         */
        let history = [];
        
        /**
         * ğŸ¨ COLOR MAP (Báº£n Ä‘á»“ mÃ u sáº¯c)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Object (tá»« Ä‘iá»ƒn) chá»©a mÃ u cho tá»«ng sá»‘
         * - Má»—i sá»‘ cÃ³ 2 mÃ u: mÃ u ná»n (bg) vÃ  mÃ u chá»¯ (text)
         * - VÃ­ dá»¥: sá»‘ 1 â†’ ná»n xanh lÃ¡ nháº¡t, chá»¯ xanh lÃ¡ Ä‘áº­m
         */
        const colorMap = {
            1:  { bg: '#dcfce7', text: '#22c55e' },  // xanh lÃ¡ (green)
            2:  { bg: '#fee2e2', text: '#ef4444' },  // Ä‘á» (red)
            3:  { bg: '#dbeafe', text: '#3b82f6' },  // xanh dÆ°Æ¡ng (blue)
            4:  { bg: '#f3e8ff', text: '#a855f7' },  // tÃ­m (purple)
            5:  { bg: '#d1fae5', text: '#10b981' },  // xanh ngá»c (emerald)
            6:  { bg: '#fef9c3', text: '#eab308' },  // vÃ ng (yellow)
            7:  { bg: '#e0e7ff', text: '#6366f1' },  // xanh chÃ m (indigo)
            8:  { bg: '#fce7f3', text: '#ec4899' },  // há»“ng (pink)
            9:  { bg: '#fef3c7', text: '#f59e0b' },  // cam (amber)
            10: { bg: '#ecfccb', text: '#84cc16' },  // vÃ ng chanh (lime)
            11: { bg: '#cffafe', text: '#06b6d4' }   // xanh cyan (cyan)
        };
        
        /**
         * ğŸ† WIN STATE (Tráº¡ng thÃ¡i tháº¯ng)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - ÄÃ¢y lÃ  "ÄÃP ÃN" - thá»© tá»± Ä‘Ãºng Ä‘á»ƒ tháº¯ng
         * - NgÆ°á»i chÆ¡i cáº§n xáº¿p board giá»‘ng y chang tháº¿ nÃ y
         * - CÃ¡c sá»‘ tá»« 1-11 theo thá»© tá»±, Ã´ Ä‘en (null) á»Ÿ cuá»‘i
         */
        const winState = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, null];
        
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 2: HÃ€M RENDER (Váº½ giao diá»‡n tá»« dá»¯ liá»‡u)                          â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * ğŸ–¼ï¸ HÃ€M RENDER BOARD (Váº½ báº£ng chÆ¡i)
         * 
         * CÃ´ng viá»‡c: 
         * - NhÃ¬n vÃ o máº£ng board
         * - Váº½ ra 12 Ã´ tÆ°Æ¡ng á»©ng trÃªn mÃ n hÃ¬nh
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Giá»‘ng nhÆ° xáº¿p 12 viÃªn gáº¡ch LEGO vÃ o khung
         * - Má»—i viÃªn cÃ³ sá»‘ vÃ  mÃ u riÃªng
         * - ViÃªn nÃ o lÃ  null thÃ¬ tÃ´ mÃ u Ä‘en
         */
        function renderBoard() {
            // BÆ°á»›c 1: TÃ¬m tháº» div cÃ³ id="gameBoard" trong HTML
            const gameBoard = document.getElementById('gameBoard');
            
            // BÆ°á»›c 2: XÃ³a háº¿t ná»™i dung cÅ© bÃªn trong (Ä‘á»ƒ váº½ láº¡i tá»« Ä‘áº§u)
            gameBoard.innerHTML = '';
            
            // BÆ°á»›c 3: Duyá»‡t qua tá»«ng pháº§n tá»­ trong máº£ng board
            // forEach = "vá»›i má»—i pháº§n tá»­, hÃ£y lÃ m..."
            // value = giÃ¡ trá»‹ (1, 2, 3, ... hoáº·c null)
            // index = vá»‹ trÃ­ (0, 1, 2, ..., 11)
            board.forEach((value, index) => {
                // Táº¡o 1 tháº» div má»›i cho Ã´ nÃ y
                const tile = document.createElement('div');
                
                // ThÃªm cÃ¡c class CSS cÆ¡ báº£n
                tile.className = 'tile flex items-center justify-center text-3xl font-bold rounded-lg cursor-pointer';
                
                if (value === null) {
                    // Náº¿u lÃ  Ã´ trá»‘ng (null) â†’ tÃ´ mÃ u Ä‘en
                    tile.style.backgroundColor = '#000000';
                } else {
                    // Náº¿u lÃ  Ã´ sá»‘ â†’ láº¥y mÃ u tá»« colorMap
                    const colors = colorMap[value];
                    tile.style.backgroundColor = colors.bg;  // MÃ u ná»n
                    tile.style.color = colors.text;          // MÃ u chá»¯
                    tile.textContent = value;                // Hiá»ƒn thá»‹ sá»‘
                }
                
                // BÆ°á»›c 4: Äáº·t Ã´ vÃ o báº£ng chÆ¡i
                gameBoard.appendChild(tile);
            });
        }
        
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 3: HÃ€M ÄIá»€U KHIá»‚N GAME (Báº¯t Ä‘áº§u, Dá»«ng, ChÆ¡i láº¡i)                â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * ğŸ¬ HÃ€M TOGGLE GAME (Báº­t/Táº¯t game)
         * 
         * CÃ´ng viá»‡c: Xá»­ lÃ½ khi ngÆ°á»i chÆ¡i báº¥m nÃºt Báº¯t Ä‘áº§u/Káº¿t thÃºc
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Giá»‘ng nhÆ° CÃ”NG Táº®C ÄÃˆN
         * - Báº¥m láº§n 1 â†’ Báº­t (báº¯t Ä‘áº§u chÆ¡i)
         * - Báº¥m láº§n 2 â†’ Táº¯t (káº¿t thÃºc)
         * - Báº¥m láº§n 3 â†’ Báº­t láº¡i...
         */
        function toggleGame() {
            if (!isPlaying) {
                // Náº¿u Ä‘ang Táº®T (chÆ°a chÆ¡i) â†’ Báº¬T lÃªn (báº¯t Ä‘áº§u chÆ¡i)
                startGame();
            } else {
                // Náº¿u Ä‘ang Báº¬T (Ä‘ang chÆ¡i) â†’ Táº®T Ä‘i (káº¿t thÃºc)
                stopGame();
            }
        }
        
        /**
         * ğŸš€ HÃ€M START GAME (Báº¯t Ä‘áº§u game)
         * 
         * CÃ¡c bÆ°á»›c thá»±c hiá»‡n:
         * 1. ÄÃ¡nh dáº¥u "Ä‘ang chÆ¡i"
         * 2. Äá»•i nÃºt xanh "Báº¯t Ä‘áº§u" â†’ nÃºt Ä‘á» "Káº¿t thÃºc"
         * 3. Reset Ä‘á»“ng há»“ vÃ  sá»‘ bÆ°á»›c vá» 0
         * 4. Trá»™n cÃ¡c Ã´ (xÃ¡o bÃ i)
         * 5. Báº­t Ä‘á»“ng há»“ Ä‘áº¿m giá»
         */
        function startGame() {
            // BÆ°á»›c 1: ÄÃ¡nh dáº¥u lÃ  Ä‘ang chÆ¡i
            isPlaying = true;
            
            // BÆ°á»›c 2: Äá»•i giao diá»‡n nÃºt
            const btn = document.getElementById('startBtn');
            btn.textContent = 'Káº¿t thÃºc';                          // Äá»•i chá»¯
            btn.classList.remove('bg-green-500', 'hover:bg-green-600');  // Bá» mÃ u xanh
            btn.classList.add('bg-red-500', 'hover:bg-red-600');         // ThÃªm mÃ u Ä‘á»
            
            // BÆ°á»›c 3: Reset timer vÃ  sá»‘ bÆ°á»›c vá» 0
            seconds = 0;
            moveCount = 0;
            updateTimerDisplay();
            
            // BÆ°á»›c 4: Trá»™n cÃ¡c Ã´ (100 láº§n di chuyá»ƒn ngáº«u nhiÃªn)
            shuffleBoard();
            
            // BÆ°á»›c 5: Báº¯t Ä‘áº§u Ä‘áº¿m giá»
            // setInterval = "Cá»© má»—i 1000ms (1 giÃ¢y), hÃ£y cháº¡y hÃ m nÃ y"
            timerId = setInterval(() => {
                seconds++;              // TÄƒng sá»‘ giÃ¢y lÃªn 1
                updateTimerDisplay();   // Cáº­p nháº­t hiá»ƒn thá»‹ Ä‘á»“ng há»“
            }, 1000);
        }
        
        /**
         * ğŸ›‘ HÃ€M STOP GAME (Dá»«ng game)
         * 
         * CÃ¡c bÆ°á»›c thá»±c hiá»‡n:
         * 1. ÄÃ¡nh dáº¥u "khÃ´ng chÆ¡i ná»¯a"
         * 2. Dá»«ng Ä‘á»“ng há»“
         * 3. Äá»•i nÃºt Ä‘á» "Káº¿t thÃºc" â†’ nÃºt xanh "Báº¯t Ä‘áº§u"
         * 4. Reset báº£ng vá» tráº¡ng thÃ¡i ban Ä‘áº§u
         */
        function stopGame() {
            // BÆ°á»›c 1: ÄÃ¡nh dáº¥u khÃ´ng cÃ²n chÆ¡i
            isPlaying = false;
            
            // BÆ°á»›c 2: Dá»«ng Ä‘á»“ng há»“
            // clearInterval = "Dá»«ng cÃ¡i Ä‘á»“ng há»“ cÃ³ sá»‘ tháº» nÃ y"
            if (timerId) {
                clearInterval(timerId);
                timerId = null;
            }
            
            // BÆ°á»›c 3: Äá»•i giao diá»‡n nÃºt vá» ban Ä‘áº§u
            const btn = document.getElementById('startBtn');
            btn.textContent = 'Báº¯t Ä‘áº§u';
            btn.classList.remove('bg-red-500', 'hover:bg-red-600');
            btn.classList.add('bg-green-500', 'hover:bg-green-600');
            
            // BÆ°á»›c 4: Reset board vá» ban Ä‘áº§u
            board = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, null];
            blackIndex = 11;
            renderBoard();
            
            // BÆ°á»›c 5: Reset Ä‘á»“ng há»“ hiá»ƒn thá»‹
            seconds = 0;
            updateTimerDisplay();
        }
        
        /**
         * ğŸ”„ HÃ€M PLAY AGAIN (ChÆ¡i láº¡i sau khi tháº¯ng)
         */
        function playAgain() {
            // áº¨n popup tháº¯ng
            document.getElementById('winModal').classList.add('hidden');
            
            // Dá»«ng game hiá»‡n táº¡i vÃ  reset
            stopGame();
        }
        
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 4: HÃ€M SHUFFLE (Trá»™n cÃ¡c Ã´)                                      â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * ğŸ”€ HÃ€M SHUFFLE BOARD (Trá»™n báº£ng)
         * 
         * CÃ¡ch trá»™n: Di chuyá»ƒn ngáº«u nhiÃªn 100 láº§n
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Giá»‘ng nhÆ° nháº¯m máº¯t báº¥m phÃ­m lung tung 100 láº§n
         * - CÃ¡c Ã´ sáº½ bá»‹ xÃ¡o trá»™n hoÃ n toÃ n
         * 
         * Táº¡i sao khÃ´ng dÃ¹ng random sort?
         * - VÃ¬ cÃ³ thá»ƒ táº¡o ra tráº¡ng thÃ¡i KHÃ”NG THá»‚ GIáº¢I ÄÆ¯á»¢C
         * - Giá»‘ng nhÆ° Rubik: náº¿u thÃ¡o ra xáº¿p láº¡i cÃ³ thá»ƒ khÃ´ng giáº£i Ä‘Æ°á»£c
         * - Báº±ng cÃ¡ch di chuyá»ƒn ngáº«u nhiÃªn, ta Ä‘áº£m báº£o LUÃ”N GIáº¢I ÄÆ¯á»¢C
         */
        function shuffleBoard() {
            // Máº£ng 4 hÆ°á»›ng cÃ³ thá»ƒ di chuyá»ƒn
            const directions = ['up', 'down', 'left', 'right'];
            
            // Láº·p 100 láº§n
            for (let i = 0; i < 100; i++) {
                // Chá»n ngáº«u nhiÃªn 1 sá»‘ tá»« 0 Ä‘áº¿n 3
                // Math.random() â†’ sá»‘ tá»« 0 Ä‘áº¿n 0.999...
                // NhÃ¢n 4 â†’ sá»‘ tá»« 0 Ä‘áº¿n 3.999...
                // Math.floor() â†’ lÃ m trÃ²n xuá»‘ng â†’ 0, 1, 2, hoáº·c 3
                const randomIndex = Math.floor(Math.random() * 4);
                const direction = directions[randomIndex];
                
                // Thá»­ di chuyá»ƒn theo hÆ°á»›ng Ä‘Ã³
                // false = khÃ´ng Ä‘áº¿m vÃ o sá»‘ bÆ°á»›c (vÃ¬ Ä‘Ã¢y lÃ  trá»™n, khÃ´ng pháº£i ngÆ°á»i chÆ¡i)
                move(direction, false);
            }
            
            // Váº½ láº¡i báº£ng sau khi trá»™n xong
            renderBoard();
        }
        
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 5: HÃ€M DI CHUYá»‚N (Logic cá»‘t lÃµi cá»§a game) â­ QUAN TRá»ŒNG NHáº¤T    â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * ğŸš¶ HÃ€M MOVE (Di chuyá»ƒn Ã´ Ä‘en)
         * 
         * @param {string} direction - HÆ°á»›ng: 'up', 'down', 'left', 'right'
         * @param {boolean} countMove - CÃ³ Ä‘áº¿m bÆ°á»›c khÃ´ng? (false khi trá»™n)
         * 
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * KIáº¾N THá»¨C QUAN TRá»ŒNG: Chuyá»ƒn Ä‘á»•i giá»¯a máº£ng 1 chiá»u vÃ  lÆ°á»›i 2 chiá»u
         * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
         * 
         * Máº£ng board lÃ  1 chiá»u: [0] [1] [2] [3] [4] [5] [6] [7] [8] [9] [10] [11]
         * 
         * NhÆ°ng hiá»ƒn thá»‹ nhÆ° lÆ°á»›i 4 cá»™t x 3 hÃ ng:
         * 
         *          Cá»™t 0   Cá»™t 1   Cá»™t 2   Cá»™t 3
         * HÃ ng 0:   [0]     [1]     [2]     [3]
         * HÃ ng 1:   [4]     [5]     [6]     [7]
         * HÃ ng 2:   [8]     [9]     [10]    [11]
         * 
         * CÃ”NG THá»¨C CHUYá»‚N Äá»”I:
         * - Tá»« index â†’ hÃ ng: row = index Ã· 4 (bá» pháº§n dÆ°)
         * - Tá»« index â†’ cá»™t:  col = index % 4 (láº¥y pháº§n dÆ°)
         * 
         * VÃ­ dá»¥: index = 5
         * - row = 5 Ã· 4 = 1 (hÃ ng 1)
         * - col = 5 % 4 = 1 (cá»™t 1)
         * 
         * DI CHUYá»‚N:
         * - LÃŠN (up):    Ã´ phÃ­a trÃªn cÃ¡ch 4 vá»‹ trÃ­    â†’ index - 4
         * - XUá»NG (down): Ã´ phÃ­a dÆ°á»›i cÃ¡ch 4 vá»‹ trÃ­   â†’ index + 4
         * - TRÃI (left): Ã´ bÃªn trÃ¡i cÃ¡ch 1 vá»‹ trÃ­    â†’ index - 1
         * - PHáº¢I (right): Ã´ bÃªn pháº£i cÃ¡ch 1 vá»‹ trÃ­   â†’ index + 1
         */
        function move(direction, countMove = true) {
            // TÃ­nh vá»‹ trÃ­ hÃ ng vÃ  cá»™t hiá»‡n táº¡i cá»§a Ã´ Ä‘en
            const row = Math.floor(blackIndex / 4);  // Chia láº¥y pháº§n nguyÃªn â†’ hÃ ng
            const col = blackIndex % 4;              // Chia láº¥y pháº§n dÆ° â†’ cá»™t
            
            // Biáº¿n lÆ°u vá»‹ trÃ­ Ã´ sáº½ hoÃ¡n Ä‘á»•i vá»›i Ã´ Ä‘en
            // -1 nghÄ©a lÃ  "chÆ°a xÃ¡c Ä‘á»‹nh" hoáº·c "khÃ´ng thá»ƒ di chuyá»ƒn"
            let targetIndex = -1;
            
            // XÃ¡c Ä‘á»‹nh Ã´ Ä‘Ã­ch dá»±a trÃªn hÆ°á»›ng di chuyá»ƒn
            switch (direction) {
                case 'up':
                    // Di chuyá»ƒn LÃŠN
                    // Äiá»u kiá»‡n: khÃ´ng pháº£i hÃ ng trÃªn cÃ¹ng (row > 0)
                    // Náº¿u row = 0 (hÃ ng trÃªn cÃ¹ng) â†’ khÃ´ng thá»ƒ Ä‘i lÃªn ná»¯a
                    if (row > 0) {
                        targetIndex = blackIndex - 4;  // Ã” phÃ­a trÃªn cÃ¡ch 4 vá»‹ trÃ­
                    }
                    break;
                    
                case 'down':
                    // Di chuyá»ƒn XUá»NG
                    // Äiá»u kiá»‡n: khÃ´ng pháº£i hÃ ng dÆ°á»›i cÃ¹ng (row < 2)
                    // Náº¿u row = 2 (hÃ ng cuá»‘i) â†’ khÃ´ng thá»ƒ Ä‘i xuá»‘ng ná»¯a
                    if (row < 2) {
                        targetIndex = blackIndex + 4;  // Ã” phÃ­a dÆ°á»›i cÃ¡ch 4 vá»‹ trÃ­
                    }
                    break;
                    
                case 'left':
                    // Di chuyá»ƒn TRÃI
                    // Äiá»u kiá»‡n: khÃ´ng pháº£i cá»™t trÃ¡i nháº¥t (col > 0)
                    // Náº¿u col = 0 (cá»™t Ä‘áº§u tiÃªn) â†’ khÃ´ng thá»ƒ Ä‘i trÃ¡i ná»¯a
                    if (col > 0) {
                        targetIndex = blackIndex - 1;  // Ã” bÃªn trÃ¡i cÃ¡ch 1 vá»‹ trÃ­
                    }
                    break;
                    
                case 'right':
                    // Di chuyá»ƒn PHáº¢I
                    // Äiá»u kiá»‡n: khÃ´ng pháº£i cá»™t pháº£i nháº¥t (col < 3)
                    // Náº¿u col = 3 (cá»™t cuá»‘i) â†’ khÃ´ng thá»ƒ Ä‘i pháº£i ná»¯a
                    if (col < 3) {
                        targetIndex = blackIndex + 1;  // Ã” bÃªn pháº£i cÃ¡ch 1 vá»‹ trÃ­
                    }
                    break;
            }
            
            // Náº¿u di chuyá»ƒn há»£p lá»‡ (targetIndex Ä‘Ã£ Ä‘Æ°á»£c gÃ¡n, khÃ¡c -1)
            if (targetIndex !== -1) {
                // â•â•â• HOÃN Äá»”I Vá»Š TRÃ â•â•â•
                // Giá»‘ng nhÆ° Ä‘á»•i chá»— 2 cá»‘c nÆ°á»›c: cáº§n 1 cá»‘c táº¡m
                
                // BÆ°á»›c 1: Äá»• nÆ°á»›c tá»« cá»‘c A vÃ o cá»‘c táº¡m
                const temp = board[targetIndex];
                
                // BÆ°á»›c 2: Äá»• nÆ°á»›c tá»« cá»‘c B vÃ o cá»‘c A
                board[targetIndex] = null;  // Ã” Ä‘Ã­ch giá» lÃ  Ã´ Ä‘en
                
                // BÆ°á»›c 3: Äá»• nÆ°á»›c tá»« cá»‘c táº¡m vÃ o cá»‘c B
                board[blackIndex] = temp;   // Vá»‹ trÃ­ cÅ© cá»§a Ã´ Ä‘en giá» cÃ³ sá»‘
                
                // Cáº­p nháº­t vá»‹ trÃ­ má»›i cá»§a Ã´ Ä‘en
                blackIndex = targetIndex;
                
                // Äáº¿m bÆ°á»›c (chá»‰ khi ngÆ°á»i chÆ¡i di chuyá»ƒn, khÃ´ng Ä‘áº¿m khi trá»™n)
                if (countMove) {
                    moveCount++;
                }
                
                return true;  // BÃ¡o hiá»‡u: di chuyá»ƒn THÃ€NH CÃ”NG
            }
            
            return false;  // BÃ¡o hiá»‡u: KHÃ”NG THá»‚ di chuyá»ƒn
        }
        
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 6: Xá»¬ LÃ BÃ€N PHÃM (Keyboard Events)                              â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * âŒ¨ï¸ Láº®NG NGHE Sá»° KIá»†N BÃ€N PHÃM
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - document.addEventListener('keydown', ...) 
         * - = "Khi cÃ³ phÃ­m Ä‘Æ°á»£c báº¥m xuá»‘ng, hÃ£y cháº¡y hÃ m nÃ y"
         * - Giá»‘ng nhÆ° Ä‘áº·t ngÆ°á»i gÃ¡c cá»•ng: ai vÃ o cÅ©ng pháº£i bÃ¡o
         * 
         * event.key chá»©a tÃªn phÃ­m:
         * - MÅ©i tÃªn: 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight'
         * - WASD: 'w', 'a', 's', 'd' (hoáº·c viáº¿t hoa)
         */
        document.addEventListener('keydown', (event) => {
            // Chá»‰ xá»­ lÃ½ khi Ä‘ang chÆ¡i
            // Náº¿u chÆ°a báº¥m "Báº¯t Ä‘áº§u" thÃ¬ báº¥m phÃ­m khÃ´ng cÃ³ tÃ¡c dá»¥ng
            if (!isPlaying) return;
            
            // Biáº¿n lÆ°u hÆ°á»›ng di chuyá»ƒn
            let direction = null;
            
            // Biáº¿n lÆ°u ID cá»§a phÃ­m Ä‘á»ƒ hiá»ƒn thá»‹ hiá»‡u á»©ng
            let keyId = null;
            
            // XÃ¡c Ä‘á»‹nh hÆ°á»›ng dá»±a trÃªn phÃ­m báº¥m
            // toLowerCase() = chuyá»ƒn thÃ nh chá»¯ thÆ°á»ng (Ä‘á»ƒ xá»­ lÃ½ cáº£ W vÃ  w)
            switch (event.key.toLowerCase()) {
                case 'arrowup':
                case 'w':
                    direction = 'up';
                    keyId = event.key.toLowerCase() === 'w' ? 'keyW' : 'keyUp';
                    break;
                    
                case 'arrowdown':
                case 's':
                    direction = 'down';
                    keyId = event.key.toLowerCase() === 's' ? 'keyS' : 'keyDown';
                    break;
                    
                case 'arrowleft':
                case 'a':
                    direction = 'left';
                    keyId = event.key.toLowerCase() === 'a' ? 'keyA' : 'keyLeft';
                    break;
                    
                case 'arrowright':
                case 'd':
                    direction = 'right';
                    keyId = event.key.toLowerCase() === 'd' ? 'keyD' : 'keyRight';
                    break;
            }
            
            // Náº¿u lÃ  phÃ­m di chuyá»ƒn há»£p lá»‡ (direction Ä‘Ã£ Ä‘Æ°á»£c gÃ¡n)
            if (direction) {
                // NgÄƒn hÃ nh vi máº·c Ä‘á»‹nh cá»§a phÃ­m
                // VÃ­ dá»¥: mÅ©i tÃªn thÆ°á»ng lÃ m scroll trang
                event.preventDefault();
                
                // Hiá»‡u á»©ng nháº¥n phÃ­m (phÃ­m nháº¥p nhÃ¡y)
                animateKey(keyId);
                
                // Thá»±c hiá»‡n di chuyá»ƒn
                if (move(direction)) {
                    // Náº¿u di chuyá»ƒn thÃ nh cÃ´ng:
                    renderBoard();  // Váº½ láº¡i báº£ng
                    checkWin();     // Kiá»ƒm tra Ä‘Ã£ tháº¯ng chÆ°a
                }
            }
        });
        
        /**
         * âœ¨ HÃ€M ANIMATE KEY (Hiá»‡u á»©ng nháº¥n phÃ­m)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - ThÃªm class 'key-pressed' â†’ phÃ­m nháº¥p nhÃ¡y
         * - Sau 200ms â†’ xÃ³a class â†’ phÃ­m trá»Ÿ láº¡i bÃ¬nh thÆ°á»ng
         */
        function animateKey(keyId) {
            const keyElement = document.getElementById(keyId);
            if (keyElement) {
                // ThÃªm class Ä‘á»ƒ kÃ­ch hoáº¡t animation
                keyElement.classList.add('key-pressed');
                
                // Sau 200ms, xÃ³a class
                setTimeout(() => {
                    keyElement.classList.remove('key-pressed');
                }, 200);
            }
        }
        
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 7: KIá»‚M TRA THáº®NG & HIá»‚N THá»Š Káº¾T QUáº¢                            â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * ğŸ† HÃ€M CHECK WIN (Kiá»ƒm tra tháº¯ng)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - So sÃ¡nh "bÃ i lÃ m" (board) vá»›i "Ä‘Ã¡p Ã¡n" (winState)
         * - Náº¿u giá»‘ng nhau tá»«ng sá»‘ â†’ THáº®NG!
         * 
         * every() = "Má»i pháº§n tá»­ Ä‘á»u thá»a Ä‘iá»u kiá»‡n thÃ¬ tráº£ vá» true"
         */
        function checkWin() {
            // So sÃ¡nh tá»«ng pháº§n tá»­ cá»§a 2 máº£ng
            const isWin = board.every((value, index) => value === winState[index]);
            
            if (isWin) {
                // â•â•â• NGÆ¯á»œI CHÆ I THáº®NG! â•â•â•
                
                // 1. Dá»«ng Ä‘á»“ng há»“
                clearInterval(timerId);
                timerId = null;
                
                // 2. LÆ°u káº¿t quáº£ vÃ o lá»‹ch sá»­
                const timeString = formatTime(seconds);
                history.push({
                    round: history.length + 1,  // Sá»‘ thá»© tá»± lÆ°á»£t chÆ¡i
                    moves: moveCount,           // Sá»‘ bÆ°á»›c Ä‘Ã£ Ä‘i
                    time: timeString            // Thá»i gian hoÃ n thÃ nh
                });
                
                // 3. Cáº­p nháº­t báº£ng lá»‹ch sá»­ trÃªn mÃ n hÃ¬nh
                updateHistory();
                
                // 4. Hiá»ƒn thá»‹ popup tháº¯ng
                document.getElementById('winMessage').textContent = 
                    `Báº¡n Ä‘Ã£ hoÃ n thÃ nh trong ${moveCount} bÆ°á»›c vá»›i thá»i gian ${timeString}!`;
                document.getElementById('winModal').classList.remove('hidden');
                
                // 5. ÄÃ¡nh dáº¥u khÃ´ng cÃ²n chÆ¡i
                isPlaying = false;
            }
        }
        
        /**
         * ğŸ“œ HÃ€M UPDATE HISTORY (Cáº­p nháº­t báº£ng lá»‹ch sá»­)
         */
        function updateHistory() {
            const tbody = document.getElementById('historyBody');
            const noHistory = document.getElementById('noHistory');
            
            // áº¨n thÃ´ng bÃ¡o "chÆ°a cÃ³ lá»‹ch sá»­"
            noHistory.classList.add('hidden');
            
            // XÃ³a ná»™i dung cÅ©
            tbody.innerHTML = '';
            
            // ThÃªm tá»«ng dÃ²ng lá»‹ch sá»­
            history.forEach((record) => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-100';
                row.innerHTML = `
                    <td class="py-3 text-center text-gray-700">${record.round}</td>
                    <td class="py-3 text-center text-gray-700">${record.moves}</td>
                    <td class="py-3 text-center text-gray-700">${record.time}</td>
                `;
                tbody.appendChild(row);
            });
        }
        
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 8: CÃC HÃ€M TIá»†N ÃCH (Utility Functions)                          â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * â° HÃ€M FORMAT TIME (Chuyá»ƒn giÃ¢y thÃ nh MM:SS)
         * 
         * Giáº£i thÃ­ch Ä‘Æ¡n giáº£n:
         * - Input: 75 (giÃ¢y)
         * - Output: "01:15" (1 phÃºt 15 giÃ¢y)
         * 
         * CÃ¡ch tÃ­nh:
         * - 75 Ã· 60 = 1 dÆ° 15
         * - 1 phÃºt, 15 giÃ¢y
         * 
         * @param {number} totalSeconds - Tá»•ng sá»‘ giÃ¢y
         * @returns {string} - Chuá»—i Ä‘á»‹nh dáº¡ng MM:SS
         */
        function formatTime(totalSeconds) {
            // TÃ­nh sá»‘ phÃºt (chia láº¥y pháº§n nguyÃªn)
            const minutes = Math.floor(totalSeconds / 60);
            
            // TÃ­nh sá»‘ giÃ¢y cÃ²n láº¡i (chia láº¥y pháº§n dÆ°)
            const secs = totalSeconds % 60;
            
            // Chuyá»ƒn thÃ nh chuá»—i 2 chá»¯ sá»‘
            // padStart(2, '0') = thÃªm sá»‘ 0 phÃ­a trÆ°á»›c náº¿u chÆ°a Ä‘á»§ 2 kÃ½ tá»±
            // VÃ­ dá»¥: "5".padStart(2, '0') â†’ "05"
            const minStr = String(minutes).padStart(2, '0');
            const secStr = String(secs).padStart(2, '0');
            
            return `${minStr}:${secStr}`;
        }
        
        /**
         * ğŸ“º HÃ€M UPDATE TIMER DISPLAY (Cáº­p nháº­t hiá»ƒn thá»‹ Ä‘á»“ng há»“)
         */
        function updateTimerDisplay() {
            document.getElementById('timer').textContent = formatTime(seconds);
        }
        
        
        // â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
        // â•‘   PHáº¦N 9: KHá»I Äá»˜NG GAME                                                â•‘
        // â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        
        /**
         * ğŸ¬ KHá»I Äá»˜NG KHI TRANG WEB LOAD XONG
         * 
         * Váº½ báº£ng ban Ä‘áº§u vá»›i cÃ¡c Ã´ Ä‘Ã£ sáº¯p xáº¿p Ä‘Ãºng thá»© tá»±
         */
        renderBoard();
        
        // Log hÆ°á»›ng dáº«n ra console Ä‘á»ƒ debug
        console.log('ğŸ§© Sliding Puzzle Game Ä‘Ã£ sáºµn sÃ ng!');
        console.log('ğŸ“ HÆ°á»›ng dáº«n: Báº¥m "Báº¯t Ä‘áº§u" Ä‘á»ƒ chÆ¡i');
        console.log('âŒ¨ï¸ Äiá»u khiá»ƒn: W/A/S/D hoáº·c phÃ­m mÅ©i tÃªn');
    </script>
</body>
</html>
